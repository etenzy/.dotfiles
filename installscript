#!/bin/bash

# Hide "last login" line when starting a new terminal session
touch $HOME/.hushlogin

echo 'Install homebrew'
echo '----------------'
sudo rm -rf /usr/local/Cellar /usr/local/.git && brew cleanup
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

brew update

# Install zsh
echo 'Install oh-my-zsh'
echo '-----------------'
brew install zsh
rm -rf $HOME/.oh-my-zsh
curl -L https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh | sh

echo 'Install zplug'
echo '-------------'
brew install zplug

echo 'Install zsh-autosuggestions'
echo '---------------------------'
brew install zsh-autosuggestions

echo 'Install zsh-completions'
echo '-----------------------'
brew install zsh-completions

echo 'Install zsh-syntax-highlighting'
echo '-------------------------------'
brew install zsh-syntax-highlighting

echo 'Install spaceship-prompt'
echo '------------------------'
git clone https://github.com/etenzy/spaceship-prompt.git "$ZSH_CUSTOM/themes/spaceship-prompt"
ln -s "$ZSH_CUSTOM/themes/spaceship-prompt/spaceship.zsh-theme" "$ZSH_CUSTOM/themes/spaceship.zsh-theme"

# Add global gitignore
ln -s $HOME/.dotfiles/global-gitignore $HOME/.global-gitignore
git config --global core.excludesfile $HOME/.global-gitignore

# Symlink zsh prefs
rm $HOME/.zshrc
ln -s $HOME/.dotfiles/zshrc $HOME/.zshrc

rm $HOME/.zprofile
ln -s $HOME/.dotfiles/zprofile $HOME/.zprofile

rm $HOME/.aliases
ln -s $HOME/.dotfiles/aliases $HOME/.aliases

rm $HOME/.exports
ln -s $HOME/.dotfiles/exports $HOME/.exports

rm $HOME/.functions
ln -s $HOME/.dotfiles/functions $HOME/.functions

# Symlink bin
rm -rf $HOME/.bin
ln -s $HOME/.dotfiles/bin/ $HOME/.bin/

# Symlink vim prefs
#rm $HOME/.vimrc
#ln -s $HOME/.dotfiles/shell/.vimrc $HOME/.vimrc
#rm $HOME/.vim
#ln -s $HOME/.dotfiles/shell/.vim $HOME/.vim

# Symlink yarn prefs
#rm $HOME/.yarnrc
#ln -s $HOME/.dotfiles/shell/.yarnrc $HOME/.yarnrc

echo 'Install php'
echo '-----------'
brew install php@7.0
brew install php@7.1
brew install php@7.2
brew install php@7.4

echo 'Install composer'
echo '----------------'
brew install composer

echo 'Install imagemagick'
echo '-------------------'
brew install imagemagick

echo 'Install imagick'
echo '---------------'
pecl install imagick

echo 'Install memcached'
echo '-----------------'
pecl install memcached

echo 'Install xdebug'
echo '--------------'
pecl install xdebug

echo 'Install php-redis'
echo '-------------'
pecl install redis

echo 'Install laravel envoy'
echo '---------------------'
composer global require "laravel/envoy=~1.0"

echo 'Install laravel valet'
echo '---------------------'
composer global require laravel/valet
valet install

echo 'Install PhpStorm'
echo '----------------'
brew cask install phpstorm

echo 'Install node'
echo '------------'
brew install node@8

echo 'Install yarn'
echo '------------'
brew install yarn

echo 'Install visual-studio-code'
echo '--------------------------'
brew cask install visual-studio-code

echo 'Install ubersicht'
echo '-------------------'
brew cask install ubersicht
rm -rf $HOME/Library/Application Support/Übersicht/widgets
git clone git@github.com:etenzy/uebersicht-widgets.git $HOME/Library/Application Support/Übersicht/widgets

echo 'Install Software from Brewfile'
echo '------------------------------'
brew bundle